import{Ea as N,Ga as R,Ha as V,J as k,Ja as W,Oa as L,Q as z,Sa as P,Ta as H,X as I,Y as x,Z as E,ba as w,fa as A,ia as B,ja as T,m as y,qa as j,ta as D,ya as F}from"./chunk-H4TFYNCJ.js";import{Fb as i,Gb as a,Hb as u,Ob as g,Qc as v,Zb as l,Zc as b,bb as d,bc as _,cb as m,cc as M,dc as S,fc as C,na as f,tb as p,vb as h}from"./chunk-RHRPDK35.js";function O(r,o){r&1&&u(0,"mat-progress-bar",12)}var rt=(()=>{let o=class o{constructor(n,e,t,c){this._notificationService=n,this._traitement=e,this._router=t,this._dialogRef=c,this.is_loading=!1}ngOnInit(){}checkAuthorization(n){if(console.log(n),this.is_loading=!0,n==0){this.is_loading=!1;return}let e={code:this.authorization};this.authorization.length>=8&&this._traitement.checkCodeAuthorization(e).subscribe({next:t=>{t.code==200?setTimeout(()=>{this._notificationService.openSnackBarSuccess(t),this._dialogRef.close(t)},1e3):(t.code==302||t.code==300)&&(this.is_loading=!1,this.authorization="",this._notificationService.openSnackBarError(t))},error:t=>{t.status==401&&(this._notificationService.openSnackBarTokenExpired(),localStorage.clear(),this._router.navigateByUrl("/"))}})}};o.\u0275fac=function(e){return new(e||o)(m(H),m(P),m(y),m(j))},o.\u0275cmp=f({type:o,selectors:[["app-check-authorisation"]],standalone:!0,features:[C],decls:20,vars:2,consts:[[1,"example-card","rounded"],["mode","indeterminate",4,"ngIf"],[1,"mb-2","d-flex","justify-content-end"],["mat-icon-button","","mat-dialog-close",""],[1,"text-center","mb-3"],["src","assets/key.svg","width","80","alt","","srcset",""],[1,"row","mt-2","justify-content-center"],[1,"col-md-12","text-center"],[1,"text-primary","fw-bolder","fs-5","mb-3"],["appearance","outline"],["matInput","","placeholder","Veuillez saisir le code d'autorisation",3,"ngModelChange","ngModel"],["matSuffix",""],["mode","indeterminate"]],template:function(e,t){e&1&&(i(0,"mat-card",0),p(1,O,1,0,"mat-progress-bar",1),i(2,"mat-card-header",2)(3,"button",3)(4,"mat-icon"),l(5,"close"),a()()(),i(6,"mat-card-content")(7,"div",4),u(8,"img",5),a(),i(9,"div",6)(10,"div",7)(11,"p",8),l(12," Veuillez saisir le code d'autorisation du responsable. "),a(),i(13,"p")(14,"mat-form-field",9)(15,"mat-label"),l(16,"Veuillez saisir le code d'autorisation"),a(),i(17,"input",10),S("ngModelChange",function(s){return M(t.authorization,s)||(t.authorization=s),s}),g("ngModelChange",function(s){return t.checkAuthorization(s)}),a(),i(18,"mat-icon",11),l(19,"key"),a()()()()()()()),e&2&&(d(),h("ngIf",t.is_loading==!0),d(16),_("ngModel",t.authorization))},dependencies:[b,v,L,k,z,T,A,B,D,F,N,R,V,W,w,I,x,E]});let r=o;return r})();export{rt as a};
