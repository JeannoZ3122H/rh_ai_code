import{a as We}from"./chunk-UFOIYNCG.js";import{c as he,h as Ce,i as xe,k as Se,l as ve,m as ye,n as be,o as we}from"./chunk-GJJTSN4U.js";import{a as ne,b as fe,c as ge}from"./chunk-NI5NDY4P.js";import{Aa as me,Ba as ce,Ca as _e,J as B,Ja as ie,La as pe,Ma as ue,O as V,Oa as R,Sa as U,Ta as O,X as I,Y as L,Z as j,ba as W,ca as re,fa as P,ha as le,ia as se,ja as A,la as de,m as k,q as T,qa as X,ra as Y,ta as Z,ua as $,va as ee,wa as te,x as ae,ya as N}from"./chunk-H4TFYNCJ.js";import{$b as Q,Ab as C,Bb as q,Db as z,Eb as K,Fb as o,Gb as n,Hb as b,Lb as x,Ob as g,Qb as m,Yb as D,Zb as r,Zc as F,bb as s,bc as S,cb as f,cc as v,dc as y,f as je,fc as M,na as E,tb as w,vb as u,xa as c,ya as _}from"./chunk-RHRPDK35.js";var J=je(We());function Ae(l,d){if(l&1&&(o(0,"mat-option",30),r(1),n()),l&2){let a=d.$implicit;u("value",a.employee_matricule),s(),Q(" ","Departement: "+a.service," ")}}function Ne(l,d){if(l&1){let a=x();o(0,"div",37)(1,"mat-form-field",28)(2,"mat-label"),r(3,"Date de la permission"),n(),o(4,"input",42),y("ngModelChange",function(e){c(a);let i=m(2);return v(i.date_permission,e)||(i.date_permission=e),_(e)}),n(),b(5,"mat-datepicker-toggle",43)(6,"mat-datepicker",null,0),n()()}if(l&2){let a=D(7),t=m(2);s(4),S("ngModel",t.date_permission),u("matDatepicker",a),s(),u("for",a)}}function Re(l,d){if(l&1){let a=x();o(0,"div",38)(1,"mat-form-field",28)(2,"span",44),r(3," D\xE9but "),n(),o(4,"input",45),y("ngModelChange",function(e){c(a);let i=m(2);return v(i.hour_start,e)||(i.hour_start=e),_(e)}),n(),b(5,"ngx-mat-timepicker",null,1),o(7,"mat-icon",46),g("click",function(){c(a);let e=D(6);return _(e.open())}),r(8," watch_later "),n()()()}if(l&2){let a=D(6),t=m(2);s(4),u("ngxMatTimepicker",a),S("ngModel",t.hour_start),u("format",24)}}function Ue(l,d){if(l&1){let a=x();o(0,"div",38)(1,"mat-form-field",28)(2,"span",44),r(3," Fin "),n(),o(4,"input",45),y("ngModelChange",function(e){c(a);let i=m(2);return v(i.hour_end,e)||(i.hour_end=e),_(e)}),n(),b(5,"ngx-mat-timepicker",null,2),o(7,"mat-icon",46),g("click",function(){c(a);let e=D(6);return _(e.open())}),r(8," watch_later "),n()()()}if(l&2){let a=D(6),t=m(2);s(4),u("ngxMatTimepicker",a),S("ngModel",t.hour_end),u("format",24)}}function Oe(l,d){if(l&1){let a=x();o(0,"div",37)(1,"mat-form-field",28)(2,"mat-label"),r(3,"Date d\xE9but de la permission"),n(),o(4,"input",42),y("ngModelChange",function(e){c(a);let i=m(2);return v(i.date_start,e)||(i.date_start=e),_(e)}),n(),b(5,"mat-datepicker-toggle",43)(6,"mat-datepicker",null,3),n()()}if(l&2){let a=D(7),t=m(2);s(4),S("ngModel",t.date_start),u("matDatepicker",a),s(),u("for",a)}}function He(l,d){if(l&1){let a=x();o(0,"div",37)(1,"mat-form-field",28)(2,"mat-label"),r(3,"Date fin de la permission"),n(),o(4,"input",47),y("ngModelChange",function(e){c(a);let i=m(2);return v(i.date_end,e)||(i.date_end=e),_(e)}),n(),b(5,"mat-datepicker-toggle",43)(6,"mat-datepicker",null,4),n()()}if(l&2){let a=D(7),t=m(2);s(4),S("ngModel",t.date_end),u("matDatepicker",a),s(),u("for",a)}}function Je(l,d){if(l&1){let a=x();o(0,"div",39)(1,"h1",33),r(2,"Joindre une pi\xE8ce justificative"),n(),o(3,"mat-radio-group",34),g("change",function(e){c(a);let i=m(2);return _(i.radioChange(e))}),o(4,"mat-radio-button",48),r(5,"OUI"),n(),o(6,"mat-radio-button",49),r(7,"NON"),n()()()}}function Ge(l,d){if(l&1){let a=x();o(0,"div",40)(1,"div",39)(2,"label",50),r(3,"Joindre une pi\xE8ce "),o(4,"code"),r(5,"*"),n()(),o(6,"input",51),g("change",function(e){c(a);let i=m(2);return _(i.uploadFile(e))}),n()()()}}function qe(l,d){if(l&1){let a=x();o(0,"div",41)(1,"div",52)(2,"button",53),g("click",function(){c(a);let e=m(2);return _(e.savePermission())}),o(3,"mat-icon"),r(4,"save"),n(),r(5," Enregistrer "),n()()()}}function ze(l,d){if(l&1){let a=x();o(0,"div",19)(1,"div",22)(2,"h1",23),r(3,"Formulaire de demande de permission"),n()(),o(4,"div",24)(5,"mat-form-field",25)(6,"mat-label"),r(7,"Le motif de la permission"),n(),o(8,"textarea",26),y("ngModelChange",function(e){c(a);let i=m();return v(i.motif,e)||(i.motif=e),_(e)}),n()()(),o(9,"div",27)(10,"mat-form-field",28)(11,"mat-label"),r(12,"Destinataire"),n(),o(13,"mat-select",29),g("selectionChange",function(e){c(a);let i=m();return _(i.onChangeDestinataire(e))}),z(14,Ae,2,2,"mat-option",30,q),n()()(),o(16,"div",31)(17,"div",32)(18,"h1",33),r(19,"Dur\xE9e de la permission"),n(),o(20,"mat-radio-group",34),g("change",function(e){c(a);let i=m();return _(i.PermissionDurationChange(e))}),o(21,"mat-radio-button",35),r(22,"En heure"),n(),o(23,"mat-radio-button",36),r(24,"En jours"),n()()(),o(25,"div",13),w(26,Ne,8,3,"div",37)(27,Re,9,3,"div",38)(28,Ue,9,3,"div",38)(29,Oe,8,3,"div",37)(30,He,8,3,"div",37),n(),w(31,Je,8,0,"div",39),n(),w(32,Ge,7,0,"div",40)(33,qe,6,0,"div",41),n()}if(l&2){let a=m();s(8),S("ngModel",a.motif),s(6),K(a.list_responsable),s(12),C(26,a.duration_is_hour==!0?26:-1),s(),C(27,a.duration_is_hour==!0?27:-1),s(),C(28,a.duration_is_hour==!0?28:-1),s(),C(29,a.duration_is_date==!0?29:-1),s(),C(30,a.duration_is_date==!0?30:-1),s(),C(31,a.duration_is_hour==!0||a.duration_is_date==!0?31:-1),s(),C(32,a.is_choose=="OUI"?32:-1),s(),C(33,a.duration_is_hour==!0||a.duration_is_date==!0?33:-1)}}function Ke(l,d){if(l&1&&(o(0,"mat-option",57),r(1),n()),l&2){let a=d.$implicit;u("value",a.type_conge),s(),Q(" ",a.type_conge," ")}}function Qe(l,d){if(l&1&&(o(0,"mat-option",30),r(1),n()),l&2){let a=d.$implicit;u("value",a.employee_matricule),s(),Q(" ","Departement: "+a.service," ")}}function Xe(l,d){if(l&1){let a=x();o(0,"div",19)(1,"div",22)(2,"h1",54),r(3,"Formulaire de demande de cong\xE9"),n()(),o(4,"div",55)(5,"mat-form-field",28)(6,"mat-label"),r(7,"Date de depart de cong\xE9"),n(),o(8,"input",56),y("ngModelChange",function(e){c(a);let i=m();return v(i.date_depart,e)||(i.date_depart=e),_(e)}),n(),b(9,"mat-datepicker-toggle",43)(10,"mat-datepicker",null,5),n()(),o(12,"div",55)(13,"mat-form-field",28)(14,"mat-label"),r(15,"Date de retour de cong\xE9"),n(),o(16,"input",56),y("ngModelChange",function(e){c(a);let i=m();return v(i.date_retour,e)||(i.date_retour=e),_(e)}),n(),b(17,"mat-datepicker-toggle",43)(18,"mat-datepicker",null,6),n()(),o(20,"div",31)(21,"div",55)(22,"mat-form-field")(23,"mat-label"),r(24,"Type de cong\xE9"),n(),o(25,"mat-select",29),g("selectionChange",function(e){c(a);let i=m();return _(i.onChangeTypeConge(e))}),z(26,Ke,2,2,"mat-option",57,q),n()()(),o(28,"div",55)(29,"mat-form-field")(30,"mat-label"),r(31,"Destinataire"),n(),o(32,"mat-select",29),g("selectionChange",function(e){c(a);let i=m();return _(i.onChangeDestinataire(e))}),z(33,Qe,2,2,"mat-option",30,q),n()()()(),o(35,"div",31)(36,"div",27)(37,"mat-form-field")(38,"mat-label"),r(39,"Objet de la demande"),n(),o(40,"input",58),y("ngModelChange",function(e){c(a);let i=m();return v(i.objet_demande,e)||(i.objet_demande=e),_(e)}),n()()()(),o(41,"div",24)(42,"label",59),r(43,"Le motif du cong\xE9s"),n(),o(44,"angular-editor",60),y("ngModelChange",function(e){c(a);let i=m();return v(i.motif,e)||(i.motif=e),_(e)}),n()(),o(45,"div",41)(46,"div",52)(47,"button",53),g("click",function(){c(a);let e=m();return _(e.saveConge())}),o(48,"mat-icon"),r(49,"save"),n(),r(50," Enregistrer "),n()()()()}if(l&2){let a=D(11),t=D(19),e=m();s(8),S("ngModel",e.date_depart),u("matDatepicker",a),s(),u("for",a),s(7),S("ngModel",e.date_retour),u("matDatepicker",t),s(),u("for",t),s(9),K(e.list_type_conge),s(7),K(e.list_responsable),s(7),S("ngModel",e.objet_demande),s(4),u("placeholder","Ex. Le motif du cong\xE9s..."),S("ngModel",e.motif)}}var wt=(()=>{let d=class d{constructor(t,e,i,p,h,H,G){this._notificationService=t,this._traitement=e,this._router=i,this._loading=p,this._userData=h,this._conge=H,this._permission=G,this.config={editable:!0,spellcheck:!0,height:"10rem",minHeight:"20rem",placeholder:"Le motif du cong\xE9s",translate:"no",defaultParagraphSeparator:"p",defaultFontName:"Arial",toolbarHiddenButtons:[["bold"]],fonts:[{class:"arial",name:"Arial"},{class:"times-new-roman",name:"Times New Roman"},{class:"calibri",name:"Calibri"},{class:"comic-sans-ms",name:"Comic Sans MS"}],customClasses:[{name:"quote",class:"quote"},{name:"redText",class:"redText"},{name:"titleText",class:"titleText",tag:"h1"}]},this.is_switching_assigment=!0,this.is_switching_leave=!1,this.switcher_is_active=!0,this.employe_matricule="",this.motif="",this.type_conge="",this.objet_demande="",this.is_choose="",this.list_responsable=[],this.list_type_conge=[],this.date_depart=(0,J.default)(),this.date_retour=(0,J.default)(),this.duration_is_hour=!1,this.date_permission=new Date,this.duration_is_date=!1,this.date_start=(0,J.default)(),this.date_end=(0,J.default)(),this.type_duration="",this.responsable=""}ngOnInit(){this.employe_matricule=this._userData.getUserData().employe_matricule,this.getTypeCongeList(),this.getAllResponsable()}uploadFile(t){this.assigment_file=t.target.files[0]}radioChange(t){this.is_choose=t.value}PermissionDurationChange(t){let e=t.value;e==="hour"?(this.duration_is_hour=!0,this.duration_is_date=!1,this.type_duration=e):e==="date"?(this.duration_is_date=!0,this.duration_is_hour=!1,this.type_duration=e):(this.duration_is_date=!1,this.duration_is_hour=!1)}switchAction(t){t=="assigments"&&(this.is_switching_assigment=!0,this.is_switching_leave=!1,this.switcher_is_active=!0),t=="leave"&&(this.is_switching_leave=!0,this.is_switching_assigment=!1,this.switcher_is_active=!1)}onChangeTypeConge(t){this.type_conge=t.value,this.objet_demande="DEMANDE DE CONGES  "+this.type_conge}onChangeDestinataire(t){this.responsable=t.value}getTypeCongeList(){this._traitement.getTypeConge().subscribe({next:t=>{this.list_type_conge=t},error:t=>{t.status==401&&(this._notificationService.openSnackBarTokenExpired(),localStorage.clear(),this._router.navigateByUrl("/"))}})}getAllResponsable(){this._traitement.getAllResponsable().subscribe({next:t=>{this.list_responsable=t},error:t=>{t.status==401&&(this._notificationService.openSnackBarTokenExpired(),localStorage.clear(),this._router.navigateByUrl("/"))}})}savePermission(){this._loading.show_loading();let t=this.calculateDifferenceBetweenDates(this.date_start,this.date_end),e=this.calculateDifferenceBetweenTwoHours(this.hour_start,this.hour_end),i=new FormData;i.append("employe_matricule",this.employe_matricule),i.append("type_duration",this.type_duration),i.append("destinataire",this.responsable),i.append("date_permission",this.formatDate(this.date_permission).toString()),e==null?i.append("duree_permission",t):i.append("duree_permission",e),e==null?(i.append("permission_end",this.formatDate(this.date_end).toString()),i.append("permission_start",this.formatDate(this.date_start).toString())):t==null&&(i.append("permission_end",this.hour_end),i.append("permission_start",this.hour_start)),i.append("motif",this.motif),i.append("permission_file",this.assigment_file==null?"":this.assigment_file),this._permission.demandePermissions(i).subscribe({next:p=>{p.code==200?(this._notificationService.openSnackBarSuccess(p),setTimeout(()=>{this._loading.hide_loading()},2e3)):(p.code==300||p.code==500||p.code==302)&&(this._loading.hide_loading(),this._notificationService.openSnackBarError(p))},error:p=>{p.status==401&&(this._notificationService.openSnackBarTokenExpired(),localStorage.clear(),this._router.navigateByUrl("/"))}})}formatDate(t){let e=t.toLocaleString("default",{year:"numeric"}),i=t.toLocaleString("default",{month:"2-digit"}),p=t.toLocaleString("default",{day:"2-digit"});return e+"-"+i+"-"+p}saveConge(){this._loading.show_loading(),console.log(this.date_depart);let t=this.calculateDifferenceBetweenDates(this.date_depart,this.date_retour),e={date_depart:this.formatDate(this.date_depart).toString(),date_retour:this.formatDate(this.date_retour).toString(),type_conge:this.type_conge,destinataire:this.responsable,objet_demande:this.objet_demande,duree_conge:t,motif:this.motif,employe_matricule:this.employe_matricule};this._conge.saveDemandeConge(e).subscribe({next:i=>{i.code==200?(this._notificationService.openSnackBarSuccess(i),setTimeout(()=>{this._loading.hide_loading()},1e3)):(i.code==300||i.code==500||i.code==302)&&(this._loading.hide_loading(),this._notificationService.openSnackBarError(i))},error:i=>{i.status==401&&(this._notificationService.openSnackBarTokenExpired(),localStorage.clear(),this._router.navigateByUrl("/"))}})}calculateDifferenceBetweenTwoHours(t,e){if(t!=null&&e!=null){let[i,p]=t.split(":").map(Number),[h,H]=e.split(":").map(Number),G=h*60+H-(i*60+p),Le=Math.floor(G/60),oe=G%60;return Le+"h"+(oe==0?"00":oe)}else return}calculateDifferenceBetweenDates(t,e){if(t!=null&&e!=null)return e.diff(t,"days")+"Jour(s)"}};d.\u0275fac=function(e){return new(e||d)(f(O),f(U),f(k),f(Se),f(ne),f(ve),f(he))},d.\u0275cmp=E({type:d,selectors:[["app-full-demandes-forms"]],standalone:!0,features:[M],decls:26,vars:5,consts:[["Date_permission",""],["pickerStart",""],["pickerEnd",""],["Date_start",""],["Date_end",""],["Date_depart",""],["Date_retour",""],[1,"hero-header"],[1,"container-fluid"],[1,"row","gx-3"],[1,"col-xxl-12"],[1,"card"],[1,"card-body"],[1,"row","justify-content-center"],[1,"d-flex","justify-content-center"],["mat-fab","","extended","",1,"me-2",3,"click","color"],["mat-fab","","extended","",1,"",3,"click","color"],[1,"hero-body"],[1,"col-xxl-12","col-sm-12","col-12"],[1,"row","gx-3","justify-content-center","mb-3"],["type","ball-circus","size","large","color","#ef8f01",3,"fullScreen"],[2,"color","#fff","font-size","1.2rem"],[1,"col-12"],[1,"text-primary","fw-bolder"],[1,"col-lg-12","mb-3"],["appearance","outline",1,"example-full-width"],["rows","3","matInput","","placeholder","Ex. Le motif de la permission...",3,"ngModelChange","ngModel"],[1,"col-lg-12"],["appearance","outline"],[3,"selectionChange"],[1,"fw-bolder",3,"value"],[1,"row","gx-3","mb-3"],[1,"col-lg-12","col-md-12","text-center","mb-2"],[1,"text-center","mb-3"],["aria-label","Select an option",3,"change"],["value","hour"],["value","date"],[1,"col-lg-4","col-md-6"],[1,"col-lg-4"],[1,"col-lg-12","col-md-12","text-center"],[1,"row","gx-3","mb-4"],[1,"row","gx-3","mb-3","justify-content-center"],["matInput","","placeholder","00/00/0000",3,"ngModelChange","ngModel","matDatepicker"],["matIconSuffix","",3,"for"],["matPrefix","",1,"mx-2"],["matInput","","placeholder","00:00",3,"ngModelChange","ngxMatTimepicker","ngModel","format"],["matSuffix","",3,"click"],["matInput","",3,"ngModelChange","ngModel","matDatepicker"],["value","OUI"],["value","NON"],["for","formFileLg",1,"form-label"],["id","formFileLg","type","file",1,"form-control","form-control-lg",3,"change"],[1,"col-lg-8","col-md-12","text-center"],["mat-fab","","extended","","color","primary",3,"click"],[1,"fw-bolder","text-danger"],[1,"col-lg-6"],["matInput","","placeholder","Ex: 00/00/0000",3,"ngModelChange","ngModel","matDatepicker"],[3,"value"],["matInput","","placeholder","Objet de la demande",3,"ngModelChange","ngModel"],["for","texte"],[3,"ngModelChange","placeholder","ngModel"]],template:function(e,i){e&1&&(o(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"div",13)(7,"div",14)(8,"button",15),g("click",function(){return i.switchAction("assigments")}),o(9,"mat-icon"),r(10,"assignment_add"),n(),r(11," Permission "),n(),o(12,"button",16),g("click",function(){return i.switchAction("leave")}),o(13,"mat-icon"),r(14,"assignment_add"),n(),r(15," Cong\xE9 "),n()()()()()()()()(),o(16,"div",17)(17,"div",9)(18,"div",18)(19,"div",11)(20,"div",12),w(21,ze,34,9,"div",19)(22,Xe,51,9,"div",19),n()()()()(),o(23,"ngx-spinner",20)(24,"p",21),r(25," Chargement en cours... "),n()()),e&2&&(s(8),u("color",i.switcher_is_active==!0?"warn":"primary"),s(4),u("color",i.switcher_is_active==!1?"warn":"primary"),s(9),C(21,i.is_switching_assigment==!0?21:-1),s(),C(22,i.is_switching_leave==!0?22:-1),s(),u("fullScreen",!0))},dependencies:[F,R,B,V,A,P,le,se,de,ae,N,me,ce,_e,pe,ue,T,W,I,L,j,xe,Ce,we,ye,be,re,ge,fe]});let l=d;return l})();function $e(l,d){l&1&&b(0,"mat-progress-bar",1)}function et(l,d){if(l&1){let a=x();o(0,"button",11),g("click",function(){c(a);let e=m();return _(e.updateDossiers())}),o(1,"mat-icon"),r(2,"update"),n(),r(3," Modifier "),n()}}function tt(l,d){if(l&1){let a=x();o(0,"button",11),g("click",function(){c(a);let e=m();return _(e.saveDossiers())}),o(1,"mat-icon"),r(2,"save"),n(),r(3," Enregistrer "),n()}}var It=(()=>{let d=class d{constructor(t,e,i,p,h,H){this._notificationService=t,this._traitement=e,this._router=i,this.data=p,this._dialogRef=h,this._userData=H,this.is_update=!1,this.fonction="",this.list_employes=[],this.libelle_dossiers="",this.employe_matricule="",this.is_loading=!1}ngOnInit(){this.employe_matricule=this._userData.getUserData().employe_matricule,this.libelle_dossiers=this._userData.getUserData().name.toUpperCase(),console.log(this.data),this.data!=null&&(this.is_update=!0,this.libelle_dossiers=this.data.libelle_dossiers,this.employe_matricule=this.data.employe_matricule,this.item_slug=this.data.slug)}saveDossiers(){if(this.libelle_dossiers==""){this._notificationService.openSnackBarSimpleError("La libell\xE9 du dossier est obligatoire");return}if(this.employe_matricule==null){this._notificationService.openSnackBarSimpleError("Le propri\xE9taire du dossier est obligatoire");return}let t={libelle_dossiers:this.libelle_dossiers.toUpperCase(),employe_matricule:this.employe_matricule};this.is_loading=!0,this._traitement.saveDossiers(t).subscribe({next:e=>{e.code==200?setTimeout(()=>{this._notificationService.openSnackBarSuccess(e),this.is_loading=!1,this._dialogRef.close(!0)},1e3):(e.code==302||e.code==300)&&(this.is_loading=!1,this._notificationService.openSnackBarError(e))},error:e=>{e.status==401&&(this._notificationService.openSnackBarTokenExpired(),localStorage.clear(),this._router.navigateByUrl("/"))}})}updateDossiers(){if(this.libelle_dossiers==""){this._notificationService.openSnackBarSimpleError("La libell\xE9 du dossier est obligatoire");return}if(this.employe_matricule==null){this._notificationService.openSnackBarSimpleError("Le propri\xE9taire du dossier est obligatoire");return}let t={libelle_dossiers:this.libelle_dossiers.toUpperCase(),employe_matricule:this.employe_matricule};this.is_loading=!0,this._traitement.updateDossiers(t,this.item_slug).subscribe({next:e=>{e.code==200?setTimeout(()=>{this._notificationService.openSnackBarSuccess(e),this.is_loading=!1,this._dialogRef.close(!0)},1e3):(e.code==302||e.code==300)&&(this.is_loading=!1,this._notificationService.openSnackBarError(e))},error:e=>{e.status==401&&(this._notificationService.openSnackBarTokenExpired(),localStorage.clear(),this._router.navigateByUrl("/"))}})}};d.\u0275fac=function(e){return new(e||d)(f(O),f(U),f(k),f(Y),f(X),f(ne))},d.\u0275cmp=E({type:d,selectors:[["app-employees-folders-dialog"]],standalone:!0,features:[M],decls:19,vars:3,consts:[["mat-dialog-title",""],["mode","indeterminate"],["mat-dialog-content",""],[1,"row","mt-2"],[1,"col-md-12","col-lg-12"],["appearance","outline"],[1,"fs-4"],["matInput","","placeholder","Libell\xE9 du dossier",3,"ngModelChange","ngModel"],["mat-dialog-actions","",1,"d-flex","justify-content-between"],["mat-fab","","extended","","color","primary","mat-dialog-close",""],["mat-fab","","extended","","color","warn"],["mat-fab","","extended","","color","warn",3,"click"]],template:function(e,i){e&1&&(o(0,"h1",0),r(1,"Nouveau dossier"),n(),w(2,$e,1,0,"mat-progress-bar",1),o(3,"div",2)(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),r(8,"Libell\xE9 du dossier "),o(9,"code",6),r(10,"*"),n()(),o(11,"input",7),y("ngModelChange",function(h){return v(i.libelle_dossiers,h)||(i.libelle_dossiers=h),h}),n()()()()(),o(12,"div",8)(13,"button",9)(14,"mat-icon"),r(15,"reply"),n(),r(16," Annuler "),n(),w(17,et,4,0,"button",10)(18,tt,4,0),n()),e&2&&(s(2),C(2,i.is_loading==!0?2:-1),s(9),S("ngModel",i.libelle_dossiers),s(6),C(17,i.is_update==!0?17:18))},dependencies:[F,R,B,V,A,P,Z,$,te,ee,N,ie,T,W,I,L,j]});let l=d;return l})();function it(l,d){l&1&&b(0,"mat-progress-bar",1)}function nt(l,d){if(l&1){let a=x();o(0,"button",14),g("click",function(){c(a);let e=m();return _(e.updateDossiersFile())}),o(1,"mat-icon"),r(2,"update"),n(),r(3," Modifier "),n()}}function ot(l,d){}var Ot=(()=>{let d=class d{constructor(t,e,i,p,h){this._notificationService=t,this._traitement=e,this._router=i,this.data=p,this._dialogRef=h,this.is_update=!1,this.libelle_file="",this.is_loading=!1}ngOnInit(){Object.keys(this.data).length==1?this.dossiers_code=this.data.dossiers_code:(this.is_update=!0,this.libelle_file=this.data.items_data.libelle_file,this.old_file=this.data.items_data.file_url,this.item_slug=this.data.items_data.slug,this.dossiers_code=this.data.dossiers_code)}uploadFile(t){this.file_url=t.target.files[0]}saveDossiersFile(){if(this.libelle_file==""){this._notificationService.openSnackBarSimpleError("Le libell\xE9 du fichier est obligatoire");return}if(this.file_url==null){this._notificationService.openSnackBarSimpleError("Le fichier du dossier est obligatoire");return}let t=new FormData;t.append("libelle_file",this.libelle_file),t.append("dossiers_code",this.dossiers_code),t.append("file_url",this.file_url!=null?this.file_url:""),this.is_loading=!0,this._traitement.saveDossiersFile(t).subscribe({next:e=>{e.code==200?setTimeout(()=>{this._notificationService.openSnackBarSuccess(e),this.is_loading=!1,this._dialogRef.close(!0)},1e3):(e.code==302||e.code==300)&&(this.is_loading=!1,this._notificationService.openSnackBarError(e))},error:e=>{e.status==401&&(this._notificationService.openSnackBarTokenExpired(),localStorage.clear(),this._router.navigateByUrl("/"))}})}updateDossiersFile(){if(this.libelle_file==""){this._notificationService.openSnackBarSimpleError("Le libell\xE9 du fichier est obligatoire");return}let t=new FormData;t.append("libelle_file",this.libelle_file),t.append("dossiers_code",this.dossiers_code),t.append("file_url",this.file_url!=null?this.file_url:""),this.is_loading=!0,this._traitement.updateDossiersFile(t,this.item_slug).subscribe({next:e=>{e.code==200?setTimeout(()=>{this._notificationService.openSnackBarSuccess(e),this.is_loading=!1,this._dialogRef.close(!0)},1e3):(e.code==302||e.code==300)&&(this.is_loading=!1,this._notificationService.openSnackBarError(e))},error:e=>{e.status==401&&(this._notificationService.openSnackBarTokenExpired(),localStorage.clear(),this._router.navigateByUrl("/"))}})}};d.\u0275fac=function(e){return new(e||d)(f(O),f(U),f(k),f(Y),f(X))},d.\u0275cmp=E({type:d,selectors:[["app-employees-folders-file"]],standalone:!0,features:[M],decls:27,vars:3,consts:[["mat-dialog-title",""],["mode","indeterminate"],["mat-dialog-content",""],[1,"row","mt-2"],[1,"col-md-12","col-lg-12"],["appearance","outline"],[1,"fs-4"],["matInput","","placeholder","Le nom du document",3,"ngModelChange","ngModel"],[1,"col-md-12","col-sm-12","col-lg-12"],["id","formFileLg","type","file",1,"form-control","form-control-lg",3,"change"],["for","formFileLg",1,"form-label","text-danger"],["mat-dialog-actions","",1,"d-flex","justify-content-between"],["mat-fab","","extended","","color","primary","mat-dialog-close",""],["mat-fab","","extended","","color","warn"],["mat-fab","","extended","","color","warn",3,"click"]],template:function(e,i){e&1&&(o(0,"h1",0),r(1,"Nouveau document"),n(),w(2,it,1,0,"mat-progress-bar",1),o(3,"div",2)(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),r(8,"Le nom du document "),o(9,"code",6),r(10,"*"),n()(),o(11,"input",7),y("ngModelChange",function(h){return v(i.libelle_file,h)||(i.libelle_file=h),h}),n()()(),o(12,"div",8)(13,"input",9),g("change",function(h){return i.uploadFile(h)}),n(),o(14,"label",10),r(15,"Joindre un document"),n()()()(),o(16,"div",11)(17,"button",12)(18,"mat-icon"),r(19,"reply"),n(),r(20," Annuler "),n(),w(21,nt,4,0,"button",13)(22,ot,0,0),o(23,"button",14),g("click",function(){return i.saveDossiersFile()}),o(24,"mat-icon"),r(25,"save"),n(),r(26," Enregistrer "),n()()),e&2&&(s(2),C(2,i.is_loading==!0?2:-1),s(9),S("ngModel",i.libelle_file),s(10),C(21,i.is_update==!0?21:22))},dependencies:[F,R,B,V,A,P,Z,$,te,ee,N,ie,T,W,I,L,j]});let l=d;return l})();export{wt as a,It as b,Ot as c};
